# My Page (마이페이지) - UI Spec

## 경로

`/mypage`

## 페이지 목적

- 사용자 주문 내역 조회
- 주문 상태 확인
- 디지털 상품 재다운로드

## 레이아웃 구조

### 1. Page Header

**구성**:
- 페이지 제목: "마이페이지"
- 사용자 이메일 표시
- 로그아웃 버튼

**레이아웃**:
- 상단 고정 또는 상단 배치

### 2. Order List Section

**목적**: 주문 내역 목록

**구성**:
- 섹션 제목: "주문 내역"
- 주문 카드 목록 (최신순)
- 각 주문 카드:
  - 주문 번호
  - 주문 날짜
  - 주문 상품 목록 (간략)
  - 총 금액
  - **주문 상태 표시** (중요!)
  - 상세 보기 버튼

**주문 상태**:
- `입금대기`: 노란색 배지
- `입금확인`: 파란색 배지
- `제작중`: 주황색 배지
- `발송중`: 초록색 배지
- `배송완료`: 회색 배지

**레이아웃**:
- 카드 리스트 형태
- 모바일: 1열 세로 스크롤
- 데스크톱: 1-2열

### 3. Order Detail (모달 또는 확장)

**목적**: 주문 상세 정보

**구성**:
- 주문 번호
- 주문 날짜
- 주문 상품 상세 목록
  - 상품명
  - 수량
  - 가격
- 총 금액
- 주문 상태
- 배송지 정보 (실물 굿즈인 경우)
- 디지털 상품 다운로드 버튼 (보이스팩인 경우)

**인터랙션**:
- 카드 클릭 시 모달 또는 확장 패널 표시
- 닫기 버튼

### 4. Digital Products Section (선택적 분리)

**목적**: 구매한 디지털 상품 재다운로드

**구성**:
- 섹션 제목: "디지털 상품"
- 보이스팩 목록
- 각 아이템:
  - 상품명
  - 구매 날짜
  - "다운로드" 버튼

**인터랙션**:
- 다운로드 버튼 클릭 → 파일 다운로드
- 다운로드 횟수 제한 없음 (1차 MVP)

## 상태 관리

### 데이터 로딩
- `orders`: 주문 목록
- `selectedOrder`: 선택된 주문 상세
- `isLoading`: 로딩 상태
- `error`: 에러 상태

### UI 상태
- `isOrderDetailOpen`: 주문 상세 모달 표시 여부

## 데이터 구조

```typescript
interface Order {
  id: string
  orderNumber: string
  createdAt: string
  status: 'PENDING' | 'PAID' | 'MAKING' | 'SHIPPING' | 'DONE'
  totalPrice: number
  items: OrderItem[]
  shippingAddress?: string
}

interface OrderItem {
  id: string
  productId: string
  productName: string
  productType: 'VOICE_PACK' | 'PHYSICAL_GOODS'
  quantity: number
  price: number
  digitalFileUrl?: string
}
```

## 인터랙션 플로우

### 주문 내역 조회
1. 페이지 로드
2. API 호출 (`GET /api/orders`)
3. 주문 목록 표시
4. 로딩/에러/빈 상태 처리

### 주문 상세 보기
1. 주문 카드 클릭
2. 모달 또는 확장 패널 표시
3. 주문 상세 정보 표시

### 디지털 상품 다운로드
1. 다운로드 버튼 클릭
2. API 호출 (`GET /api/orders/{orderId}/download/{itemId}`)
3. 파일 다운로드 시작
4. Toast 메시지: "다운로드가 시작되었습니다"

### 로그아웃
1. 로그아웃 버튼 클릭
2. 확인 모달 (선택)
3. API 호출 (`POST /api/auth/logout`)
4. 로그인 페이지로 리다이렉트

## 디자인 가이드

### 주문 카드
- 명확한 테두리
- 상태 배지 눈에 띄게
- 호버 시 강조 효과

### 상태 배지
- 입금대기: 노란색 (#FFC107)
- 입금확인: 파란색 (#2196F3)
- 제작중: 주황색 (#FF9800)
- 발송중: 초록색 (#4CAF50)
- 배송완료: 회색 (#9E9E9E)

### Empty State
- "아직 주문 내역이 없습니다"
- "굿즈샵에서 마음에 드는 상품을 찾아보세요"
- 굿즈샵으로 이동 버튼

## 반응형

### 모바일 (< 768px)
- 1열 세로 스크롤
- 주문 카드 전체 너비
- 모달 전체 화면

### 태블릿 (768px ~ 1024px)
- 1-2열 그리드
- 모달 중앙 정렬

### 데스크톱 (> 1024px)
- 1-2열 그리드
- 모달 중앙 정렬 (최대 800px)

## 접근성

- 주문 상태 텍스트와 색상 함께 표시
- 키보드 네비게이션 지원
- 모달 포커스 트랩
- 적절한 heading 레벨

## 보안

- 본인 주문만 조회 가능 (서버 검증)
- 다운로드 URL 보안 (임시 토큰 또는 서버 검증)

## 성능

- 주문 목록 페이지네이션 (주문 많을 경우)
- 초기 로딩 속도 우선
- 다운로드 URL 캐싱 (선택)

## 1차 MVP 제외 기능

- 알림 센터
- 회원 정보 수정
- 프로필 이미지
- 리뷰 작성
- 주문 취소 기능 (CS로 대체)

## API 연동

- 주문 목록: `GET /api/orders`
- 주문 상세: `GET /api/orders/{orderId}`
- 디지털 상품 다운로드: `GET /api/orders/{orderId}/download/{itemId}`
- 로그아웃: `POST /api/auth/logout`

## 참고사항

- 입금 확인 후에만 디지털 상품 다운로드 가능
- 주문 상태는 관리자가 수동으로 변경
- 배송 추적은 2차 확장
- 주문 취소는 CS로 처리 (1차 MVP)
